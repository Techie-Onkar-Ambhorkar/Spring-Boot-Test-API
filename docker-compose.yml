version: '3.8'

# Add this section to set the project name
x-project-name: "learnings"

services:
  spring-boot-test-api:  # Keep the original service name
    build: .
    image: spring-boot-test-api
    container_name: spring-boot-test-api  # Keep the original container name
    labels:
      - com.docker.compose.project=learnings
      - com.docker.compose.service=spring-boot-test-api
    ports:
      - "8050:8080"
    environment:
      - SPRING_PROFILES_ACTIVE=${ACTIVE_PROFILE:-}
      - SERVER_SERVLET_CONTEXT-PATH=/spring-boot-test-api
      - JAVA_OPTS=${JAVA_OPTS:-"-Xms256m -Xmx512m"}
    volumes:
      - ./logs:/app/logs
      - ./heapdumps:/app/heapdumps
    restart: unless-stopped
    networks:
      - learnings-network

networks:
  learnings-network:
    driver: bridge